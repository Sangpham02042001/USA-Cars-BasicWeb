const carDealsJSON = [
    {
        "img": "2020_BMW_X3_1.jpg",
        "carName": "2020 BMW X3",
        "details": [
            {
                "h2": "cash back deals",
                "list": [
                    "Up to $4,250 cash back ",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$41,950-$76,900"
    },
    {
        "img": "2020_cadillac_xt6_angularfront.jpg",
        "carName": "2020 Cadillac XT6",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 72 months plus $2,500 bonus cash",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$52,695-$57,095"
    },
    {
        "img": "2020_chevrolet_equinox_angularfront.jpg",
        "carName": "2020 Chevrolet Equinox",
        "details": [
            {
                "h2": "CASH BACK DEALS",
                "list": [
                    "$4,250 cash back ",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$23,800-$35,700"
    },
    {
        "img": "2020_Chrysler_Pacifica_Hybrid_1.jpg",
        "carName": "2020 Chrysler Pacifica Hybrid",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 60 months plus up to $3,750 cash back (Northeast, Midwest, South Central, Southwest, Northwest)",
                    "0% financing for 60 months plus up to $4,250 cash back (Mid-Atlantic, Southeast)",
                    "0% financing for 72 months (Northeast, Mid-Atlantic, South Central, Southwest, Northwest)",
                    "0% financing for 84 months (Southeast, Midwest)",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$39,995-$45,845"
    },
    {
        "img": "2020_Dodge_Challenger_1.jpg",
        "carName": "2020 Dodge Challenger",
        "details": [
            {
                "h2": "CASH BACK DEALS",
                "list": [
                    "Up to $7,970 cash back ",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": " $28,095-$58,995"
    },
    {
        "img": "2020_Ford_Escape_3.jpg",
        "carName": "2020 Ford Escape",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 60 months plus $2,000 cash back with trade-in (Mid-Atlantic)",
                    "0% financing for 72 months plus $2,000 cash back with trade-in (Southwest)",
                    "0% financing for 60 months plus $3,500 cash back with trade-in (Northwest)"
                ],
                "span": "(Expires: 01/04/21)",
            },
            {
                "h2": "CASH BACK DEALS",
                "list": [
                    "$5,250 cash back with trade-in (Northeast)",
                    "$4,500 cash back with trade-in (Southeast)",
                    "$4,250 cash back with trade-in (Midwest)",
                    "$5,500 cash back with trade-in (South Central)"
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$24,885-$36,835"
    },
    {
        "img": "2020_Infiniti_QX60_63.jpg",
        "carName": "2020 Infiniti QX60",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 72 months plus two years of complimentary maintenance ",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$44,350-$48,150"
    },
    {
        "img": "2020_lexus_ls_angularfront.jpg",
        "carName": "2020 Lexus LS",
        "details": [
            {
                "h2": "CASH BACK DEALS",
                "list": [
                    "$7,000 cash back (Northeast, Mid-Atlantic, Midwest, Southwest, Northwest)",
                    "$8,000 cash back (Southeast, South Central)"
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$75,450-$100,865"
    },
    {
        "img": "2020_nissan_titan_angularfront.jpg",
        "carName": "2020 Nissan Titan",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 84 months plus $2,000 cash back (Northeast, Mid-Atlantic, Southeast, Midwest, Southwest)",
                    "0% financing for 84 months plus $3,000 cash back (South Central, Northwest) "
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$36,190-$58,690"
    },
    {
        "img": "2020_Toyota_Avalon_2.jpg",
        "carName": "2020 Toyota Avalon",
        "details": [
            {
                "h2": "CASH BACK DEALS",
                "list": [
                    "$3,500 cash back (Northeast, Mid-Atlantic, Northwest)",
                    "$4,000 cash back (Midwest)",
                    "$5,000 cash back (Southwest)"
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": " $35,875-$42,575"
    },
    {
        "img": "2020_volkswagen_arteon_angularfront.jpg",
        "carName": "2020 Volkswagen Arteon",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 72 months",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": " $35,995-$47,695"
    },
    {
        "img": "2021_Chevrolet_Equinox_1.jpg",
        "carName": "2021 Chevrolet Equinox",
        "details": [
            {
                "h2": "CASH BACK DEALS",
                "list": [
                    "$3,250 cash back",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$52,695-$57,095"
    },
    {
        "img": "2021_Hyundai_Sonata_1.jpg",
        "carName": "2021 Hyundai Sonata",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 72 months plus $2,500 bonus cash",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": "$23,600-$33,850"
    },
    {
        "img": "2021_Jaguar_F-Type_1.jpg",
        "carName": "2021 Jaguar F-Type",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 72 months",
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": " $61,600-$105,900"
    },
    {
        "img": "2021_Nissan_Titan_1.jpg",
        "carName": "2021 Nissan Titan",
        "details": [
            {
                "h2": "FINANCE DEALS",
                "list": [
                    "0% financing for 84 months (Northeast, Mid-Atlantic, Southeast, Midwest, South Central, Southwest)",
                    "0% financing for 84 months plus $1,000 bonus cash (Northwest) "
                ],
                "span": "(Expires: 01/04/21)",
            }
        ],
        "price": " $36,550-$59,280"
    }
];
const dealsImgLink = "../resources/img/cardeals/";



var bestDealMake = document.querySelector(".best-deal-make");
var bestDealModel = document.querySelector(".best-deal-model");
for (let x in menuJSON) {
    bestDealMake.options[bestDealMake.options.length] = new Option(x, x);
}
bestDealMake.onchange = function () {
    $(bestDealModel).find('option').remove();
    for (let y in menuJSON[this.value]) {
        bestDealModel.options[bestDealModel.options.length] = new Option(y, y);
    }
}

for (let i = 0; i < carDealsJSON.length; i++) {
    var dealItem = document.createElement("div");
    dealItem.setAttribute("class", "car-deals-item");
    var itemContent = document.createElement("div");
    itemContent.setAttribute("class", "deal-item-content");

    var img = document.createElement("img");
    img.setAttribute("class", "deal-item-img");
    img.setAttribute("src", dealsImgLink + carDealsJSON[i]["img"]);
    itemContent.appendChild(img);

    var itemMain = document.createElement("div");
    itemMain.setAttribute("class", "deal-item-main");
    let a = document.createElement("a");
    a.setAttribute("href", "#");
    a.textContent = carDealsJSON[i]["carName"];
    itemMain.appendChild(a);
    for (let j in carDealsJSON[i]["details"]) {
        let x = carDealsJSON[i]["details"][j];
        let h2 = document.createElement("h2");
        h2.setAttribute("class", "deal-main-header");
        h2.textContent = x["h2"];
        itemMain.appendChild(h2);
        for (let k = 0; k < x["list"].length; k++) {
            let p = document.createElement("p");
            p.setAttribute("class", "deal-main-text");
            p.textContent = x["list"][k];
            if (k == x["list"].length - 1) {
                let span = document.createElement("span");
                let node = document.createTextNode(x["span"]);
                span.appendChild(node);
                p.appendChild(span);
            }
            itemMain.appendChild(p);
        }
    }
    itemContent.appendChild(itemMain);
    dealItem.appendChild(itemContent);

    let itemPrice = document.createElement("div");
    itemPrice.setAttribute("class", "deal-item-price");
    let node2 = document.createTextNode("MSRP: ");
    itemPrice.appendChild(node2);
    let span2 = document.createElement("span");
    let node3 = document.createTextNode(carDealsJSON[i]["price"]);
    span2.appendChild(node3);
    itemPrice.appendChild(span2);
    dealItem.appendChild(itemPrice);

    let itemForm = document.createElement("div");
    itemForm.setAttribute("class", "deal-item-form input-group");
    let input = document.createElement("input");
    input.setAttribute("type", "text");
    input.setAttribute("placeholder", "Zip code");
    itemForm.appendChild(input);
    let div = document.createElement("div");
    div.setAttribute("class", "input-group-append");
    let button = document.createElement("button");
    button.setAttribute("class", "btn btn-danger");
    button.setAttribute("type", "submit");
    button.textContent = "Get the best price";
    div.appendChild(button);
    itemForm.appendChild(div);
    dealItem.appendChild(itemForm);
    document.querySelector(".car-deals-list").appendChild(dealItem);
}

if (document.body.offsetWidth < "992") {
    for (let i = 0; i < document.querySelectorAll(".deal-item-main").length; i++) {
        document.querySelectorAll(".deal-item-main")[i].appendChild(document.querySelectorAll(".deal-item-price")[i]);
        document.querySelectorAll(".deal-item-main")[i].appendChild(document.querySelectorAll(".deal-item-form")[i]);
    }
}
